---
title: Concepts
description: Core concepts behind color-input-color spaces, gamut detection, and popover behavior
---

import ColorInputDemo from '../../../components/ColorInputDemo.astro';

## Color Spaces

A **color space** defines how colors are represented numerically. Different color spaces are useful for different tasks:

- **OKLCH** (recommended) - Perceptually uniform lightness and chroma. Best for creating accessible color scales and harmonious palettes.
- **HSL** - Intuitive hue/saturation/lightness. Familiar but not perceptually uniform.
- **sRGB** - Standard RGB for web. Limited to the sRGB gamut.
- **Display P3** - Wide-gamut RGB for modern displays. ~35% more colors than sRGB.
- **LAB/LCH** - CIE perceptual spaces. Precursors to OKLCH.

The `colorspace` attribute determines which color space the picker uses for editing. You can convert between spaces seamlessly-the component handles the math automatically.

<ColorInputDemo value="oklch(70% 0.2 180)" colorspace="oklch" />

:::tip[Choosing a Color Space]
Use **OKLCH** for design work-it provides perceptually uniform adjustments. Use **HSL** when familiarity matters more than precision. Use **Display P3** when targeting wide-gamut displays.
:::

## Gamut Detection

**Gamut** refers to the range of colors a color space or display can represent. The component automatically detects which gamut contains your color:

- **sRGB** - Standard web colors (~16.7 million colors)
- **P3** - Display P3 gamut (~50% larger than sRGB)
- **Rec2020** - Ultra-wide broadcast gamut
- **XYZ** - Colors outside all standard gamuts

The detected gamut is exposed via the `gamut` property and included in the `change` event detail. This helps you understand whether a color is displayable on standard screens.

```js
const picker = document.querySelector('color-input');

picker.addEventListener('change', (event) => {
  console.log(event.detail.gamut); // "srgb", "p3", "rec2020", or "xyz"
});
```

:::note
Colors outside the sRGB gamut may appear differently on standard displays vs. wide-gamut displays. The picker shows you the mathematical color value-what you see depends on your display capabilities.
:::

## Popover Behavior

The color picker UI appears in a **popover**-a native browser overlay that:

- Floats above other content
- Dismisses on Escape or outside click
- Respects the top layer (no z-index battles)
- Positions intelligently to stay in view

### Opening the Picker

Two ways to open:

1. **Click the trigger button** (the built-in chip)
2. **Call the `show()` method programmatically:**
   ```js
   const picker = document.querySelector('color-input');
   picker.show();
   ```

#### Programmatic Control Example

<div class="demo">
  <color-input id="programmatic-demo" value="oklch(65% 0.2 240)" colorspace="oklch"></color-input>
  <div class="demo-controls">
    <button type="button" id="show-btn">Show Picker</button>
    <button type="button" id="hide-btn">Hide Picker</button>
  </div>
</div>

<script>{`
  const picker = document.querySelector('#programmatic-demo');
  const showBtn = document.querySelector('#show-btn');
  const hideBtn = document.querySelector('#hide-btn');

  if (picker && showBtn && hideBtn) {
    showBtn.addEventListener('click', () => picker.show(showBtn));
    hideBtn.addEventListener('click', () => picker.close());
  }
`}</script>

### Closing the Picker

The popover closes when:

- User presses **Escape**
- User clicks **outside** the popover
- You call `picker.close()`
- Another popover opens (only one at a time)

### Positioning

The picker automatically positions itself relative to the trigger button, respecting:

- Viewport boundaries
- Safe area insets (notches, rounded corners)
- Scroll containers

You can optionally provide a custom anchor element:

```js
const customAnchor = document.querySelector('#my-anchor');
picker.setAnchor(customAnchor);
```

The popover will then position relative to that anchor instead of the trigger button.

:::caution[Browser Support]
The Popover API is required. Supported in Chrome 114+, Safari 17+, Firefox 125+. For older browsers, you'll need a polyfill or the picker won't open.
:::

## Next Steps

- [API: Attributes](/api/attributes) - Configure value, colorspace, and theme
- [API: Events](/api/events) - Listen for changes and popover state
- [API: Methods](/api/methods) - Control the picker programmatically
