---
title: API Reference
description: Complete API documentation for color-input attributes, properties, methods, events, and CSS parts
---

import ColorInputDemo from "../../components/ColorInputDemo.astro";
import EventLogger from "../../components/EventLogger.astro";
import { Tabs, TabItem } from "@astrojs/starlight/components";

## Attributes

The `<color-input>` element accepts three HTML attributes:

### value

The `value` attribute sets the color using standard CSS color syntax.

```html
<color-input value="oklch(70% 20% 240)"></color-input>
```

<Tabs>
  <TabItem label="OKLCH">
    <ColorInputDemo value="oklch(70% 20% 240)" />
  </TabItem>
  <TabItem label="HSL">
    <ColorInputDemo value="hsl(240 80% 60%)" />
  </TabItem>
  <TabItem label="Hex">
    <ColorInputDemo value="#3b82f6" />
  </TabItem>
  <TabItem label="Display P3">
    <ColorInputDemo value="color(display-p3 0.3 0.7 0.95)" />
  </TabItem>
</Tabs>

```html
<color-input value="hsl(200 90% 50%)"></color-input>
```

:::tip
If `value` is omitted, it defaults to `oklch(75% 75% 180)` (vibrant cyan).
:::

::::note
The component automatically converts between color spaces.
::::

### theme

The `theme` attribute controls the visual appearance:

- **`auto`** (default) - Respects user's system preference
- **`light`** - Always uses light theme
- **`dark`** - Always uses dark theme

<Tabs>
  <TabItem label="Auto">
    <ColorInputDemo value="oklch(65% 20% 280)" theme="auto" />
  </TabItem>
  <TabItem label="Light">
    <ColorInputDemo value="oklch(65% 20% 280)" theme="light" />
  </TabItem>
  <TabItem label="Dark">
    <ColorInputDemo value="oklch(65% 20% 280)" theme="dark" />
  </TabItem>
</Tabs>

## Inline Text Input

Every `<color-input>` now includes an inline text field for editing the current color string. It accepts anything the CSS Color Level 4 parser understands and keeps the sliders, preview, and computed properties in sync as you type.

- Validation runs on every keystroke. When parsing fails the host gains a `data-error` attribute, the textbox sets `aria-invalid="true"`, and the inline error message becomes visible.
- Restyle the field with `::part(input)` and target invalid states with `[data-error]`.

```html
<color-input value="#9333ea"></color-input>
```

## Copy to Clipboard

Hover or focus the preview area to reveal a copy button. Activating it copies the current color string with `navigator.clipboard.writeText()` and shows a "Copied!" status message inside the panel. No configuration is requiredâ€”the control works for every supported color space, including `hex`.

::::note
The Clipboard API requires a secure context (https or localhost) and a user interaction. Browsers that block it simply prevent the confirmation message from showing.
::::

## Properties

The `<color-input>` element exposes five properties:

### Read/Write Properties

**value** - Current color as a CSS string

```js
const picker = document.querySelector("color-input");
console.log(picker.value); // "oklch(70% 20% 240)"
picker.value = "oklch(80% 15% 180)";
```

::::note
For backward compatibility you can also assign through the legacy setter: `picker.setColor = 'oklch(80% 15% 180)'`.
::::

**colorspace** - Current color space

```js
console.log(picker.colorspace); // "oklch"
picker.colorspace = "hsl";
```

**theme** - Visual theme

```js
console.log(picker.theme); // "auto"
picker.theme = "dark"; // "auto", "light", or "dark"
```

### Read-Only Properties

**gamut** - Detected gamut (smallest gamut that contains the current color)

```js
console.log(picker.gamut); // "srgb" | "p3" | "rec2020" | "xyz"
```

**contrastColor** - Recommended text color for contrast

```js
console.log(picker.contrastColor); // "white" or "black"
```

:::note
All read/write properties reflect to attributes and vice versa.
:::

## Methods

### show()

Opens the picker popover programmatically:

```js
const picker = document.querySelector("color-input");
picker.show();
```

### showPicker()

Alias for `show()` retained for compatibility with earlier versions:

```js
picker.showPicker();
```

### close()

Closes the picker popover:

```js
picker.close();
```

### setAnchor(element)

Sets a custom anchor element for popover positioning:

```js
const customAnchor = document.querySelector("#my-anchor");
picker.setAnchor(customAnchor);
```

By default, the popover positions relative to the trigger button.

::::note
The compatibility setter `picker.setAnchorElement = customAnchor` mirrors `setAnchor()` for drop-in upgrades.
::::

## Command API Integration

`<color-input>` listens for [Popover command events](https://developer.mozilla.org/en-US/docs/Web/API/Popover_API#invoking_commands) so you can wire it up with declarative `popovertarget` controls or custom command dispatchers.

- Buttons with `popovertarget` automatically send `show`, `hide`, or `toggle` commands that the element consumes.
- The component accepts either the short (`show`, `hide`, `toggle`) or Popover-specific (`show-popover`, `hide-popover`, `toggle-popover`) command strings.
- When a command originates from an invoker element, that invoker becomes the new popover anchor via `setAnchor()`.

```html
<button popovertarget="picker" popovertargetaction="toggle">
  Toggle color picker
</button>
<color-input id="picker"></color-input>
```

You can also trigger commands manually:

```js
const cmd = new Event("command", { bubbles: true });
Object.assign(cmd, { command: "show" });
picker.dispatchEvent(cmd);
```

## Events

The `<color-input>` element dispatches three custom events:

### change

Fired when the color value changes. The event detail contains:

```ts
interface ChangeDetail {
  value: string; // CSS color string, e.g., "oklch(70% 20% 240)"
  colorspace: string; // Current color space, e.g., "oklch"
  gamut: string; // Detected gamut: "srgb", "p3", "rec2020", or "xyz"
}
```

```js
picker.addEventListener("change", (event) => {
  const { value, colorspace, gamut } = event.detail;
  console.log(`New color: ${value}`);
  console.log(`Color space: ${colorspace}`);
  console.log(`Gamut: ${gamut}`);
});
```

<EventLogger />

### open

Fired when the picker popover opens:

```js
picker.addEventListener("open", () => {
  console.log("Picker opened");
});
```

### close

Fired when the picker popover closes:

```js
picker.addEventListener("close", () => {
  console.log("Picker closed");
});
```

:::tip
All events bubble and can be captured at parent elements.
:::

## CSS Parts

The `<color-input>` element exposes several CSS parts for styling with the `::part()` selector:

- `trigger` - The button that opens the picker
- `chip` - Color swatch inside the trigger button
- `input` - Inline text field for direct color entry
- `error` - Text with color parsing error message
- `panel` - Popover container
- `output` - CSS color string display
- `gamut` - Gamut badge (srgb/p3/rec2020/xyz)
- `controls` - Container for channel sliders and inputs
